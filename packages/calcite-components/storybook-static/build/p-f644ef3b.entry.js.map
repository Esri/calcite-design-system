{"version":3,"names":["CSS","container","content","tabCss","CalciteTabStyle0","Tab","this","guid","render","id","el","h","Host","key","labeledBy","class","scale","role","tabIndex","selected","connectedCallback","parentTabsEl","closest","componentDidLoad","calciteInternalTabRegister","emit","disconnectedCallback","document","body","dispatchEvent","CustomEvent","detail","internalTabChangeHandler","event","targetTabsEl","composedPath","find","tagName","tab","getTabIndex","then","index","stopPropagation","Array","prototype","indexOf","call","nodeListToArray","parentElement","children","filter","matches","updateAriaInfo","tabIds","titleIds","ICON","chevronRight","chevronLeft","activeIndicatorContainer","containerHasEndTabTitleOverflow","containerHasStartTabTitleOverflow","scrollButton","scrollButtonContainer","scrollBackwardContainerButton","scrollForwardContainerButton","tabTitleSlotWrapper","tabNavCss","CalciteTabNavStyle0","TabNav","effectiveDir","lastScrollWheelAxis","resizeObserver","createObserver","updateScrollingState","activeIndicatorEl","updateActiveIndicator","onTabTitleWheel","preventDefault","deltaX","deltaY","x","Math","abs","y","scrollBy","scrollByX","currentTarget","requestAnimationFrame","onSlotChange","intersectionObserver","disconnect","slottedChildren","target","assignedElements","forEach","child","observe","storeContainerRef","containerEl","storeTabTitleWrapperRef","tabTitleContainerEl","root","threshold","scrollToTabTitles","direction","readTask","tabTitleContainer","containerBounds","getBoundingClientRect","tabTitles","from","querySelectorAll","reverse","closestToEdge","tabTitle","tabTitleBounds","containerEndX","width","tabTitleEndX","afterContainerEnd","crossingContainerEnd","beforeContainerStart","crossingContainerStart","scrollerButtonWidth","offsetAdjustment","offsetWidth","clientWidth","scrollTo","offsetLeft","left","behavior","scrollToNextTabTitles","scrollToPreviousTabTitles","handleTabFocus","destination","focused","focusElementInGroup","enabledTabTitles","scrollTabTitleIntoView","onTabTitleScroll","renderScrollButton","overflowDirection","bordered","messages","hasOverflowingStartTabTitle","hasOverflowingEndTabTitle","isEnd","hidden","appearance","nextTabTitles","previousTabTitles","iconFlipRtl","iconStart","kind","onClick","onMessagesChange","selectedTabIdChanged","localStorage","storageId","selectedTabId","undefined","setItem","JSON","stringify","calciteInternalTabChange","selectedTitle","getTabTitleById","selectedTitleChanged","connectLocalized","connectMessages","componentWillLoad","storageKey","getItem","storedTab","parse","setUpMessages","componentWillRender","layout","getElementDir","componentDidRender","length","every","title","getTabIdentifier","disconnectLocalized","disconnectMessages","indicatorWidth","offset","indicatorOffset","indicatorStyle","right","position","CSS_UTILITY","rtl","ref","onScroll","onWheel","onSlotchange","activeIndicatorContainerEl","style","focusPreviousTabHandler","focusNextTabHandler","focusFirstTabHandler","focusLastTabHandler","internalActivateTabHandler","activatedTabTitle","getIndexOfTabTitle","isLTR","scrollPosition","scrollLeft","overflowingStartTabTitle","overflowingEndTabTitle","activateTabHandler","calciteTabChange","internalCloseTabHandler","closedTabTitleEl","handleTabTitleClose","updateTabTitles","globalInternalTabChangeHandler","syncId","iconStartChangeHandler","effectiveLocaleChange","updateMessages","effectiveLocale","parseInt","calciteSize24","calciteSize32","calciteSize44","tabTitleScrollLeft","containerScrollLeft","navWidth","tabLeft","tabWidth","offsetRight","offsetBase","multiplier","isOverflowStart","isOverflowEnd","visibleWidth","totalContentWidth","scrollWidth","Promise","all","map","ids","filterDirectChildren","closed","selectionModified","visibleTabTitlesIndices","reduce","tabTitleIndices","totalVisibleTabTitles","closable","activateTab","closedTabTitleIndex","findIndex","nextTabTitleIndex","value","focus","closeButton","contentHasText","iconEnd","iconPresent","titleIcon","ICONS","close","tabTitleCss","CalciteTabTitleStyle0","TabTitle","closeClickHandler","closeTabTitleAndNotify","mutationObserver","updateHasText","calciteInternalTabIconChanged","selectedHandler","connectInteractive","setupTextContentObserver","parentTabNavEl","disconnectInteractive","iconStartEl","flipRtl","icon","getIconScale","iconEndEl","controls","toAriaBoolean","disabled","InteractiveContainer","hasText","renderCloseButton","closeButtonEl","type","calciteInternalTabTitleRegister","updateHostInteraction","keyDownHandler","includes","calciteInternalTabsFocusNext","calciteInternalTabsFocusPrevious","calciteInternalTabsFocusFirst","calciteInternalTabsFocusLast","userTriggered","payload","calciteInternalTabsActivate","calciteTabsActivate","textContent","trim","childList","subtree","calciteInternalTabsClose","calciteTabsClose","SLOTS","titleGroup","tabsCss","CalciteTabsStyle0","Tabs","mutationsList","mutation","nodeName","updateItems","handleInheritableProps","Fragment","name","titles","registryHandler","calciteTabTitleUnregister","tabs","calciteTabUnregister","nav","querySelector","some","sort","a","b","localeCompare","tabDomIndexes","titleDomIndexes","indexInDOM","registryIndex"],"sources":["src/components/tab/resources.ts","src/components/tab/tab.scss?tag=calcite-tab&encapsulation=shadow","src/components/tab/tab.tsx","src/components/tab-nav/resources.ts","src/components/tab-nav/tab-nav.scss?tag=calcite-tab-nav&encapsulation=shadow","src/components/tab-nav/tab-nav.tsx","src/components/tab-title/resources.ts","src/components/tab-title/tab-title.scss?tag=calcite-tab-title&encapsulation=shadow","src/components/tab-title/tab-title.tsx","src/components/tabs/resources.ts","src/components/tabs/tabs.scss?tag=calcite-tabs&encapsulation=shadow","src/components/tabs/tabs.tsx"],"sourcesContent":["export const CSS = {\n  container: \"container\",\n  content: \"content\",\n};\n","/**\n * CSS Custom Properties\n *\n * These properties can be overridden using the component's tag as selector.\n *\n * @prop --calcite-tab-content-block-padding: [Deprecated] Use `--calcite-tab-content-space-y` instead. Specifies the block padding of the component's content in the `default` slot.\n * @prop --calcite-tab-content-space-y: Specifies the vertical space of the component's content in the `default` slot.\n */\n\n:host([selected]) {\n  section,\n  .container {\n    @apply block;\n  }\n}\n\n:host {\n  @apply hidden h-full w-full;\n}\n\n:host([selected]) {\n  @apply block h-full w-full overflow-auto;\n}\n\n.content {\n  @apply box-border;\n}\n\n.scale-s {\n  font-size: var(--calcite-font-size-sm);\n  line-height: 1rem;\n\n  .content {\n    padding-block: var(--calcite-tab-content-space-y, var(--calcite-tab-content-block-padding, theme(\"spacing.1\")));\n  }\n}\n\n.scale-m {\n  font-size: var(--calcite-font-size);\n  line-height: 1rem;\n\n  .content {\n    padding-block: var(--calcite-tab-content-space-y, var(--calcite-tab-content-block-padding, theme(\"spacing.2\")));\n  }\n}\n\n.scale-l {\n  font-size: var(--calcite-font-size-md);\n  line-height: 1.25rem;\n\n  .content {\n    padding-block: var(--calcite-tab-content-space-y, var(--calcite-tab-content-block-padding, theme(\"spacing.[2.5]\")));\n  }\n}\n\nsection,\n.container {\n  @apply hidden h-full w-full;\n}\n\n.container {\n  @apply focus-base;\n\n  &:focus {\n    @apply focus-inset;\n  }\n}\n\n@include base-component();\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n  VNode,\n} from \"@stencil/core\";\nimport { nodeListToArray } from \"../../utils/dom\";\nimport { guid } from \"../../utils/guid\";\nimport { Scale } from \"../interfaces\";\nimport { CSS } from \"./resources\";\nimport { TabChangeEventDetail } from \"./interfaces\";\n\n/**\n * @slot - A slot for adding custom content.\n */\n@Component({\n  tag: \"calcite-tab\",\n  styleUrl: \"tab.scss\",\n  shadow: true,\n})\nexport class Tab {\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Specifies a unique name for the component.\n   *\n   * When specified, use the same value on the `calcite-tab-title`.\n   */\n  @Prop({ reflect: true }) tab: string;\n\n  /**\n   * When `true`, the component's contents are selected.\n   *\n   * Only one tab can be selected within the `calcite-tabs` parent.\n   */\n  @Prop({ reflect: true, mutable: true }) selected = false;\n\n  /**\n   * Specifies the size of the component inherited from the parent `calcite-tabs`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  render(): VNode {\n    const id = this.el.id || this.guid;\n\n    return (\n      <Host aria-labelledby={this.labeledBy} id={id}>\n        <div\n          class={{ [CSS.container]: true, [`scale-${this.scale}`]: true }}\n          role=\"tabpanel\"\n          tabIndex={this.selected ? 0 : -1}\n        >\n          <section class={CSS.content}>\n            <slot />\n          </section>\n        </div>\n      </Host>\n    );\n  }\n\n  connectedCallback(): void {\n    this.parentTabsEl = this.el.closest(\"calcite-tabs\");\n  }\n\n  componentDidLoad(): void {\n    this.calciteInternalTabRegister.emit();\n  }\n\n  disconnectedCallback(): void {\n    // Dispatching to body in order to be listened by other elements that are still connected to the DOM.\n    document.body?.dispatchEvent(\n      new CustomEvent(\"calciteTabUnregister\", {\n        detail: this.el,\n      }),\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabRegister: EventEmitter<void>;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"calciteInternalTabChange\", { target: \"body\" })\n  internalTabChangeHandler(event: CustomEvent<TabChangeEventDetail>): void {\n    const targetTabsEl = event\n      .composedPath()\n      .find((el: HTMLElement) => el.tagName === \"CALCITE-TABS\");\n\n    // to allow `<calcite-tabs>` to be nested we need to make sure this\n    // `calciteTabChange` event was actually fired from a within the same\n    // `<calcite-tabs>` that is the a parent of this tab.\n    if (targetTabsEl !== this.parentTabsEl) {\n      return;\n    }\n\n    if (this.tab) {\n      this.selected = this.tab === event.detail.tab;\n    } else {\n      this.getTabIndex().then((index) => {\n        this.selected = index === event.detail.tab;\n      });\n    }\n    event.stopPropagation();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Returns the index of the component item within the tab array.\n   */\n  @Method()\n  async getTabIndex(): Promise<number> {\n    return Array.prototype.indexOf.call(\n      nodeListToArray(this.el.parentElement.children).filter((el) => el.matches(\"calcite-tab\")),\n      this.el,\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteTabElement;\n\n  parentTabsEl: HTMLCalciteTabsElement;\n\n  guid = `calcite-tab-title-${guid()}`;\n\n  @State() labeledBy: string;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * @param tabIds\n   * @param titleIds\n   * @internal\n   */\n  @Method()\n  async updateAriaInfo(tabIds: string[] = [], titleIds: string[] = []): Promise<void> {\n    this.labeledBy = titleIds[tabIds.indexOf(this.el.id)] || null;\n  }\n}\n","export const ICON = {\n  chevronRight: \"chevron-right\",\n  chevronLeft: \"chevron-left\",\n};\n\nexport const CSS = {\n  activeIndicatorContainer: \"tab-nav-active-indicator-container\",\n  container: \"tab-nav\",\n  containerHasEndTabTitleOverflow: \"tab-nav--end-overflow\",\n  containerHasStartTabTitleOverflow: \"tab-nav--start-overflow\",\n  scrollButton: \"scroll-button\",\n  scrollButtonContainer: \"scroll-button-container\",\n  scrollBackwardContainerButton: \"scroll-button-container--backward\",\n  scrollForwardContainerButton: \"scroll-button-container--forward\",\n  tabTitleSlotWrapper: \"tab-titles-slot-wrapper\",\n};\n","/**\n * CSS Custom Properties\n *\n * These properties can be overridden using the component's tag as selector.\n *\n * @prop --calcite-tab-nav-button-background-color-active: defines the scroll button's background color in an active state.\n * @prop --calcite-tab-nav-button-background-color-focus: defines the scroll button's background color in a focus state.\n * @prop --calcite-tab-nav-button-background-color-hover: defines the scroll button's background color in a hover state.\n * @prop --calcite-tab-nav-button-background-color: defines the scroll button's background color.\n * @prop --calcite-tab-nav-button-border-color-active: defines the scroll button's border color in an active state.\n * @prop --calcite-tab-nav-button-border-color-focus: defines the scroll button's border color in a focus state.\n * @prop --calcite-tab-nav-button-border-color-hover: defines the scroll button's border color in a hover state.\n * @prop --calcite-tab-nav-button-border-color: defines the scroll button's border color.\n * @prop --calcite-tab-nav-button-corner-radius: defines the scroll button's corner radius.\n * @prop --calcite-tab-nav-button-icon-color-active: Specifies the color of the scroll buttons' icon when active.\n * @prop --calcite-tab-nav-button-icon-color-focus: Specifies the color of the scroll buttons' icon when focused.\n * @prop --calcite-tab-nav-button-icon-color-hover: Specifies the color of the scroll buttons' icon when hovered.\n * @prop --calcite-tab-nav-button-icon-color: Specifies the color of the scroll buttons' icon.\n * @prop --calcite-tab-nav-button-loader-color: defines the scroll button's loader color.\n * @prop --calcite-tab-nav-button-shadow-active: defines the scroll button's shadow color in an active state.\n * @prop --calcite-tab-nav-button-shadow-focus: defines the scroll button's shadow color in a focus state.\n * @prop --calcite-tab-nav-button-shadow-hover: defines the scroll button's shadow color in a hover state.\n * @prop --calcite-tab-nav-button-shadow: defines the scroll button's shadow.\n * @prop --calcite-tab-nav-button-text-color-active: defines the scroll button's text color in an active state.\n * @prop --calcite-tab-nav-button-text-color-focus: defines the scroll button's text color in a focus state.\n * @prop --calcite-tab-nav-button-text-color-hover: defines the scroll button's text color in a hover state.\n * @prop --calcite-tab-nav-button-text-color: defines the scroll button's text color.\n * @prop --calcite-tab-nav-indicator-color: Specifies the color of the active tab indicator.\n */\n\n:host {\n  --calcite-internal-tab-nav-gradient-start-side: left;\n  --calcite-internal-tab-nav-gradient-end-side: right;\n\n  @apply relative flex;\n}\n\n.scale-s {\n  --calcite-internal-tab-nav-scroller-button-width: #{$calcite-size-24};\n  min-block-size: theme(\"spacing.6\");\n}\n\n.scale-m {\n  --calcite-internal-tab-nav-scroller-button-width: #{$calcite-size-32};\n  min-block-size: theme(\"spacing.8\");\n}\n\n.scale-l {\n  --calcite-internal-tab-nav-scroller-button-width: #{$calcite-size-44};\n  min-block-size: theme(\"spacing.11\");\n}\n\n.calcite--rtl {\n  --calcite-internal-tab-nav-gradient-start-side: right;\n  --calcite-internal-tab-nav-gradient-end-side: left;\n}\n\n$last-mask-color-stop-position: 51%; // we go beyond the half point to ensure the mask color stops overlap when both start and end are overflowing\n\n.tab-nav--start-overflow {\n  .tab-nav-active-indicator-container,\n  .tab-titles-slot-wrapper {\n    mask-image: linear-gradient(\n      to var(--calcite-internal-tab-nav-gradient-end-side),\n      transparent,\n      transparent var(--calcite-internal-tab-nav-scroller-button-width),\n      white var(--calcite-internal-tab-nav-scroller-button-width),\n      white $last-mask-color-stop-position\n    );\n  }\n}\n\n.tab-nav--end-overflow {\n  .tab-nav-active-indicator-container,\n  .tab-titles-slot-wrapper {\n    mask-image: linear-gradient(\n      to var(--calcite-internal-tab-nav-gradient-start-side),\n      transparent,\n      transparent var(--calcite-internal-tab-nav-scroller-button-width),\n      white var(--calcite-internal-tab-nav-scroller-button-width),\n      white $last-mask-color-stop-position\n    );\n  }\n}\n\n.tab-nav--start-overflow.tab-nav--end-overflow {\n  .tab-nav-active-indicator-container,\n  .tab-titles-slot-wrapper {\n    mask-image: linear-gradient(\n        to var(--calcite-internal-tab-nav-gradient-end-side),\n        transparent,\n        transparent var(--calcite-internal-tab-nav-scroller-button-width),\n        white var(--calcite-internal-tab-nav-scroller-button-width),\n        white $last-mask-color-stop-position,\n        transparent $last-mask-color-stop-position\n      ),\n      linear-gradient(\n        to var(--calcite-internal-tab-nav-gradient-start-side),\n        transparent,\n        transparent var(--calcite-internal-tab-nav-scroller-button-width),\n        white var(--calcite-internal-tab-nav-scroller-button-width),\n        white $last-mask-color-stop-position,\n        transparent $last-mask-color-stop-position\n      );\n  }\n}\n\n.tab-nav::-webkit-scrollbar {\n  display: none;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n:host([layout=\"center\"]) {\n  ::slotted(calcite-tab-title) {\n    display: flex;\n    flex-grow: 1;\n    flex-shrink: 0;\n    min-inline-size: auto;\n    white-space: nowrap;\n  }\n\n  ::slotted(calcite-tab-title[selected]) {\n    overflow: unset;\n  }\n}\n\n:host(:not([bordered])) {\n  .scale-l {\n    --calcite-internal-tab-nav-gap: var(--calcite-size-xxl);\n  }\n  .scale-m {\n    --calcite-internal-tab-nav-gap: var(--calcite-size-xl);\n  }\n  .scale-s {\n    --calcite-internal-tab-nav-gap: var(--calcite-size-lg);\n  }\n\n  .tab-titles-slot-wrapper {\n    gap: var(--calcite-internal-tab-nav-gap);\n  }\n}\n\n:host([layout=\"center\"]:not([bordered])) {\n  .tab-titles-slot-wrapper {\n    padding-inline: var(--calcite-spacing-xxl);\n  }\n}\n\n.tab-nav,\n.tab-titles-slot-wrapper {\n  @apply flex\n    w-full\n    justify-start\n    whitespace-nowrap\n    overflow-hidden;\n}\n\n// prevent indicator overflow in horizontal scrolling situations\n.tab-nav-active-indicator-container {\n  @apply absolute\n    bottom-0\n    h-0.5\n    inset-x-0\n    overflow-hidden\n    w-full;\n}\n\n.tab-nav-active-indicator {\n  @apply absolute\n    bottom-0\n    block\n    h-0.5\n    ease-out\n    transition-all;\n\n  background-color: var(--calcite-tab-nav-indicator-color, var(--calcite-color-brand));\n}\n\n.scroll-button-container {\n  @apply absolute bottom-0 top-0;\n\n  calcite-button {\n    --calcite-button-background-color: var(--calcite-tab-nav-button-background-color, var(--calcite-color-transparent));\n    --calcite-button-border-color: var(--calcite-tab-nav-button-border-color);\n    --calcite-button-corner-radius: var(--calcite-tab-nav-button-corner-radius);\n    --calcite-button-icon-color: var(--calcite-tab-nav-button-icon-color);\n    --calcite-button-loader-color: var(--calcite-tab-nav-button-loader-color);\n    --calcite-button-shadow: var(--calcite-tab-nav-button-shadow);\n    --calcite-button-text-color: var(--calcite-tab-nav-button-text-color, var(--calcite-color-text-3));\n    --calcite-offset-invert-focus: 1;\n\n    block-size: var(--calcite-container-size-content-fluid);\n\n    &:hover {\n      --calcite-button-background-color: var(--calcite-tab-nav-button-background-color-hover);\n      --calcite-button-border-color: var(--calcite-tab-nav-button-border-color-hover);\n      --calcite-button-icon-color: var(--calcite-tab-nav-button-icon-color-hover);\n      --calcite-button-shadow: var(--calcite-tab-nav-button-shadow-hover);\n      --calcite-button-text-color: var(--calcite-tab-nav-button-text-color-hover, unset);\n    }\n    &:focus {\n      --calcite-button-background-color: var(--calcite-tab-nav-button-background-color-focus);\n      --calcite-button-border-color: var(--calcite-tab-nav-button-border-color-focus);\n      --calcite-button-icon-color: var(--calcite-tab-nav-button-icon-color-focus);\n      --calcite-button-shadow: var(--calcite-tab-nav-button-shadow-focus);\n      --calcite-button-text-color: var(--calcite-tab-nav-button-text-color-focus);\n    }\n    &:active {\n      --calcite-button-background-color: var(\n        --calcite-tab-nav-button-background-color-active,\n        var(--calcite-color-transparent-hover)\n      );\n      --calcite-button-border-color: var(--calcite-tab-nav-button-border-color-active);\n      --calcite-button-icon-color: var(--calcite-tab-nav-button-icon-color-active);\n      --calcite-button-shadow: var(--calcite-tab-nav-button-shadow-active);\n      --calcite-button-text-color: var(--calcite-tab-nav-button-text-color-active);\n    }\n  }\n}\n\n.scroll-button-container--forward {\n  inset-inline-end: 0;\n  z-index: var(--calcite-z-index);\n}\n\n.scroll-button-container--backward {\n  inset-inline-start: 0;\n  z-index: var(--calcite-z-index);\n}\n\n:host(:not([bordered])) {\n  .scroll-button-container--backward,\n  .scroll-button-container--forward {\n    &::before {\n      background-color: var(--calcite-color-border-3);\n      content: \"\";\n      inline-size: var(--calcite-border-width-sm);\n      inset-block-start: var(--calcite-border-width-md);\n      inset-block-end: var(--calcite-border-width-md);\n      position: absolute;\n    }\n  }\n\n  .scroll-button-container--backward::before {\n    inset-inline-end: 0;\n  }\n\n  .scroll-button-container--forward::before {\n    inset-inline-start: 0;\n  }\n}\n\n:host .position-bottom .tab-nav-active-indicator {\n  inset-block-end: unset;\n  @apply top-0;\n}\n\n:host .position-bottom .tab-nav-active-indicator-container {\n  inset-block-end: unset;\n  @apply top-0;\n}\n\n:host([bordered]) .tab-nav-active-indicator-container {\n  inset-block-end: unset; // display active blue line above instead of below\n}\n\n:host([bordered]) .position-bottom .tab-nav-active-indicator-container {\n  inset-block-end: 0; // display active blue line below instead of above\n  inset-block-start: unset;\n}\n\n@media (forced-colors: active) {\n  .tab-nav-active-indicator {\n    background-color: highlight;\n  }\n}\n\n@include base-component();\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Prop,\n  readTask,\n  State,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport {\n  calciteSize24,\n  calciteSize32,\n  calciteSize44,\n} from \"@esri/calcite-design-tokens/dist/es6/core\";\nimport {\n  Direction,\n  filterDirectChildren,\n  focusElementInGroup,\n  FocusElementInGroupDestination,\n  getElementDir,\n} from \"../../utils/dom\";\nimport { createObserver } from \"../../utils/observers\";\nimport { Scale } from \"../interfaces\";\nimport { TabChangeEventDetail, TabCloseEventDetail } from \"../tab/interfaces\";\nimport { TabID, TabLayout, TabPosition } from \"../tabs/interfaces\";\nimport { connectLocalized, disconnectLocalized, LocalizedComponent } from \"../../utils/locale\";\nimport {\n  connectMessages,\n  disconnectMessages,\n  setUpMessages,\n  T9nComponent,\n  updateMessages,\n} from \"../../utils/t9n\";\nimport { CSS_UTILITY } from \"../../utils/resources\";\nimport { CSS, ICON } from \"./resources\";\nimport { TabNavMessages } from \"./assets/tab-nav/t9n\";\n\n/**\n * @slot - A slot for adding `calcite-tab-title`s.\n */\n@Component({\n  tag: \"calcite-tab-nav\",\n  styleUrl: \"tab-nav.scss\",\n  shadow: true,\n  assetsDirs: [\"assets\"],\n})\nexport class TabNav implements LocalizedComponent, T9nComponent {\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Specifies the name when saving selected `calcite-tab` data to `localStorage`.\n   */\n  @Prop({ reflect: true }) storageId: string;\n\n  /**\n   * Specifies text to update multiple components to keep in sync if one changes.\n   */\n  @Prop({ reflect: true }) syncId: string;\n\n  /**\n   * Specifies the component's selected `calcite-tab-title`.\n   *\n   * @readonly\n   */\n  @Prop({ mutable: true }) selectedTitle: HTMLCalciteTabTitleElement = null;\n\n  /**\n   * Specifies the size of the component inherited from the parent `calcite-tabs`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  /**\n   * @internal\n   */\n  @Prop({ reflect: true, mutable: true }) layout: TabLayout = \"inline\";\n\n  /**\n   * Specifies the position of `calcite-tab-nav` and `calcite-tab-title` components in relation to, and is inherited from the parent `calcite-tabs`, defaults to `top`.\n   *\n   *  @internal\n   */\n  @Prop() position: TabPosition = \"bottom\";\n\n  /**\n   * @internal\n   */\n  @Prop({ reflect: true, mutable: true }) bordered = false;\n\n  /**\n   * @internal\n   */\n  @Prop({ mutable: true }) indicatorOffset: number;\n\n  /**\n   * @internal\n   */\n  @Prop({ mutable: true }) indicatorWidth: number;\n\n  /**\n   * Made into a prop for testing purposes only.\n   *\n   * @internal\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messages: TabNavMessages;\n\n  /**\n   * Use this property to override individual strings used by the component.\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messageOverrides: Partial<TabNavMessages>;\n\n  @Watch(\"messageOverrides\")\n  onMessagesChange(): void {\n    /* wired up by t9n util */\n  }\n\n  @Watch(\"selectedTabId\")\n  async selectedTabIdChanged(): Promise<void> {\n    if (\n      localStorage &&\n      this.storageId &&\n      this.selectedTabId !== undefined &&\n      this.selectedTabId !== null\n    ) {\n      localStorage.setItem(`calcite-tab-nav-${this.storageId}`, JSON.stringify(this.selectedTabId));\n    }\n\n    this.calciteInternalTabChange.emit({\n      tab: this.selectedTabId,\n    });\n\n    this.selectedTitle = await this.getTabTitleById(this.selectedTabId);\n  }\n\n  @Watch(\"selectedTitle\")\n  selectedTitleChanged(): void {\n    this.updateActiveIndicator();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.parentTabsEl = this.el.closest(\"calcite-tabs\");\n    this.resizeObserver?.observe(this.el);\n    connectLocalized(this);\n    connectMessages(this);\n  }\n\n  async componentWillLoad(): Promise<void> {\n    const storageKey = `calcite-tab-nav-${this.storageId}`;\n    if (localStorage && this.storageId && localStorage.getItem(storageKey)) {\n      const storedTab = JSON.parse(localStorage.getItem(storageKey));\n      this.selectedTabId = storedTab;\n    }\n    await setUpMessages(this);\n  }\n\n  componentDidLoad(): void {\n    this.scrollTabTitleIntoView(this.selectedTitle, \"instant\");\n  }\n\n  componentWillRender(): void {\n    const { parentTabsEl } = this;\n\n    this.layout = parentTabsEl?.layout;\n    this.bordered = parentTabsEl?.bordered;\n    this.effectiveDir = getElementDir(this.el);\n\n    if (this.selectedTitle) {\n      this.updateActiveIndicator();\n    }\n  }\n\n  componentDidRender(): void {\n    // if every tab title is active select the first tab.\n    if (\n      this.tabTitles.length &&\n      this.tabTitles.every((title) => !title.selected) &&\n      !this.selectedTabId\n    ) {\n      this.tabTitles[0].getTabIdentifier().then((tab) => {\n        this.calciteInternalTabChange.emit({\n          tab,\n        });\n      });\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.resizeObserver?.disconnect();\n    disconnectLocalized(this);\n    disconnectMessages(this);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  //--------------------------------------------------------------------------\n\n  render(): VNode {\n    const width = `${this.indicatorWidth}px`;\n    const offset = `${this.indicatorOffset}px`;\n    const indicatorStyle =\n      this.effectiveDir !== \"rtl\" ? { width, left: offset } : { width, right: offset };\n\n    return (\n      <Host role=\"tablist\">\n        <div\n          class={{\n            [CSS.container]: true,\n            [CSS.containerHasStartTabTitleOverflow]: !!this.hasOverflowingStartTabTitle,\n            [CSS.containerHasEndTabTitleOverflow]: !!this.hasOverflowingEndTabTitle,\n            [`scale-${this.scale}`]: true,\n            [`position-${this.position}`]: true,\n            [CSS_UTILITY.rtl]: this.effectiveDir === \"rtl\",\n          }}\n          ref={this.storeContainerRef}\n        >\n          {this.renderScrollButton(\"start\")}\n          <div\n            class={{\n              [CSS.tabTitleSlotWrapper]: true,\n            }}\n            onScroll={this.onTabTitleScroll}\n            onWheel={this.onTabTitleWheel}\n            ref={this.storeTabTitleWrapperRef}\n          >\n            <slot onSlotchange={this.onSlotChange} />\n          </div>\n          <div\n            class={{\n              [CSS.activeIndicatorContainer]: true,\n            }}\n            ref={(el) => (this.activeIndicatorContainerEl = el)}\n          >\n            <div\n              class=\"tab-nav-active-indicator\"\n              ref={(el) => (this.activeIndicatorEl = el as HTMLElement)}\n              style={indicatorStyle}\n            />\n          </div>\n          {this.renderScrollButton(\"end\")}\n        </div>\n      </Host>\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"calciteInternalTabsFocusPrevious\")\n  focusPreviousTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"previous\");\n  }\n\n  @Listen(\"calciteInternalTabsFocusNext\")\n  focusNextTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"next\");\n  }\n\n  @Listen(\"calciteInternalTabsFocusFirst\")\n  focusFirstTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"first\");\n  }\n\n  @Listen(\"calciteInternalTabsFocusLast\")\n  focusLastTabHandler(event: CustomEvent): void {\n    this.handleTabFocus(event, event.target as HTMLCalciteTabTitleElement, \"last\");\n  }\n\n  @Listen(\"calciteInternalTabsActivate\")\n  internalActivateTabHandler(event: CustomEvent<TabChangeEventDetail>): void {\n    const activatedTabTitle = event.target as HTMLCalciteTabTitleElement;\n\n    this.selectedTabId = event.detail.tab\n      ? event.detail.tab\n      : this.getIndexOfTabTitle(activatedTabTitle);\n    event.stopPropagation();\n\n    this.scrollTabTitleIntoView(activatedTabTitle);\n  }\n\n  private scrollTabTitleIntoView(\n    activatedTabTitle: HTMLCalciteTabTitleElement,\n    behavior: ScrollBehavior = \"smooth\",\n  ): void {\n    if (!activatedTabTitle) {\n      return;\n    }\n\n    readTask(() => {\n      const isLTR = this.effectiveDir === \"ltr\";\n      const tabTitleContainer = this.tabTitleContainerEl;\n      const containerBounds = tabTitleContainer.getBoundingClientRect();\n      const tabTitleBounds = activatedTabTitle.getBoundingClientRect();\n      const scrollPosition = tabTitleContainer.scrollLeft;\n      const overflowingStartTabTitle = isLTR\n        ? this.hasOverflowingStartTabTitle\n        : this.hasOverflowingEndTabTitle;\n      const overflowingEndTabTitle = isLTR\n        ? this.hasOverflowingEndTabTitle\n        : this.hasOverflowingStartTabTitle;\n\n      if (\n        tabTitleBounds.left <\n        containerBounds.left + (overflowingStartTabTitle ? this.scrollerButtonWidth : 0)\n      ) {\n        const left =\n          scrollPosition + (tabTitleBounds.left - containerBounds.left) - this.scrollerButtonWidth;\n        tabTitleContainer.scrollTo({ left, behavior });\n      } else if (\n        tabTitleBounds.right >\n        containerBounds.right - (overflowingEndTabTitle ? this.scrollerButtonWidth : 0)\n      ) {\n        const left =\n          scrollPosition +\n          (tabTitleBounds.right - containerBounds.right) +\n          this.scrollerButtonWidth;\n        tabTitleContainer.scrollTo({ left, behavior });\n      }\n    });\n  }\n\n  @Listen(\"calciteTabsActivate\")\n  activateTabHandler(event: CustomEvent<void>): void {\n    this.calciteTabChange.emit();\n    event.stopPropagation();\n  }\n\n  @Listen(\"calciteInternalTabsClose\")\n  internalCloseTabHandler(event: CustomEvent<TabCloseEventDetail>): void {\n    const closedTabTitleEl = event.target as HTMLCalciteTabTitleElement;\n    this.handleTabTitleClose(closedTabTitleEl);\n    event.stopPropagation();\n  }\n\n  /**\n   * Check for active tabs on register and update selected\n   *\n   * @param event\n   */\n  @Listen(\"calciteInternalTabTitleRegister\")\n  updateTabTitles(event: CustomEvent<TabID>): void {\n    if ((event.target as HTMLCalciteTabTitleElement).selected) {\n      this.selectedTabId = event.detail;\n    }\n  }\n\n  @Listen(\"calciteInternalTabChange\", { target: \"body\" })\n  globalInternalTabChangeHandler(event: CustomEvent<TabChangeEventDetail>): void {\n    if (\n      this.syncId &&\n      event.target !== this.el &&\n      (event.target as HTMLCalciteTabNavElement).syncId === this.syncId &&\n      this.selectedTabId !== event.detail.tab\n    ) {\n      this.selectedTabId = event.detail.tab;\n    }\n    event.stopPropagation();\n  }\n\n  @Listen(\"calciteInternalTabIconChanged\")\n  iconStartChangeHandler(): void {\n    this.updateActiveIndicator();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Emits when the selected `calcite-tab` changes.\n   */\n  @Event({ cancelable: false }) calciteTabChange: EventEmitter<void>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabChange: EventEmitter<TabChangeEventDetail>;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteTabNavElement;\n\n  @State() defaultMessages: TabNavMessages;\n\n  @State() effectiveLocale = \"\";\n\n  @Watch(\"effectiveLocale\")\n  effectiveLocaleChange(): void {\n    updateMessages(this, this.effectiveLocale);\n  }\n\n  @State() private hasOverflowingStartTabTitle = false;\n\n  @State() private hasOverflowingEndTabTitle = false;\n\n  @State() private selectedTabId: TabID;\n\n  private activeIndicatorEl: HTMLElement;\n\n  private activeIndicatorContainerEl: HTMLDivElement;\n\n  private containerEl: HTMLDivElement;\n\n  private effectiveDir: Direction = \"ltr\";\n\n  private lastScrollWheelAxis: \"x\" | \"y\" = \"x\";\n\n  private parentTabsEl: HTMLCalciteTabsElement;\n\n  private tabTitleContainerEl: HTMLDivElement;\n\n  private intersectionObserver: IntersectionObserver;\n\n  private resizeObserver = createObserver(\"resize\", () => {\n    this.updateScrollingState();\n\n    if (!this.activeIndicatorEl) {\n      return;\n    }\n\n    this.updateActiveIndicator();\n  });\n\n  private get scrollerButtonWidth(): number {\n    const { scale } = this;\n    return parseInt(scale === \"s\" ? calciteSize24 : scale === \"m\" ? calciteSize32 : calciteSize44);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  private updateActiveIndicator(): void {\n    const tabTitleScrollLeft = this.tabTitleContainerEl?.scrollLeft;\n    const containerScrollLeft = this.containerEl?.scrollLeft;\n    const navWidth = this.activeIndicatorContainerEl?.offsetWidth;\n    const tabLeft = this.selectedTitle?.offsetLeft;\n    const tabWidth = this.selectedTitle?.offsetWidth;\n    const offsetRight = navWidth - tabLeft - tabWidth;\n    const offsetBase = this.effectiveDir === \"ltr\" ? tabLeft : offsetRight;\n    const multiplier = this.effectiveDir === \"ltr\" ? -1 : 1;\n\n    this.indicatorOffset = offsetBase + multiplier * (containerScrollLeft + tabTitleScrollLeft);\n    this.indicatorWidth = this.selectedTitle?.offsetWidth;\n  }\n\n  private onTabTitleWheel = (event: WheelEvent): void => {\n    event.preventDefault();\n\n    const { deltaX, deltaY } = event;\n    const x = Math.abs(deltaX);\n    const y = Math.abs(deltaY);\n\n    let scrollBy: number;\n\n    if (x === y) {\n      scrollBy = this.lastScrollWheelAxis === \"x\" ? deltaX : deltaY;\n    } else if (x > y) {\n      scrollBy = deltaX;\n      this.lastScrollWheelAxis = \"x\";\n    } else {\n      scrollBy = deltaY;\n      this.lastScrollWheelAxis = \"y\";\n    }\n\n    const scrollByX = (this.effectiveDir === \"rtl\" ? -1 : 1) * scrollBy;\n    (event.currentTarget as HTMLDivElement).scrollBy(scrollByX, 0);\n    requestAnimationFrame(() => this.updateActiveIndicator());\n  };\n\n  private onSlotChange = (event: Event): void => {\n    this.intersectionObserver?.disconnect();\n\n    const slottedChildren = (event.target as HTMLSlotElement).assignedElements();\n    slottedChildren.forEach((child) => {\n      this.intersectionObserver?.observe(child);\n    });\n  };\n\n  private storeContainerRef = (el: HTMLDivElement) => (this.containerEl = el);\n\n  private storeTabTitleWrapperRef = (el: HTMLDivElement) => {\n    this.tabTitleContainerEl = el;\n    this.intersectionObserver = createObserver(\"intersection\", () => this.updateScrollingState(), {\n      root: el,\n      threshold: [0, 0.5, 1],\n    });\n  };\n\n  private updateScrollingState(): void {\n    const tabTitleContainer = this.tabTitleContainerEl;\n\n    if (!tabTitleContainer) {\n      return;\n    }\n\n    let isOverflowStart: boolean;\n    let isOverflowEnd: boolean;\n\n    const scrollPosition = tabTitleContainer.scrollLeft;\n    const visibleWidth = tabTitleContainer.clientWidth;\n    const totalContentWidth = tabTitleContainer.scrollWidth;\n\n    if (this.effectiveDir === \"ltr\") {\n      isOverflowStart = scrollPosition > 0;\n      isOverflowEnd = scrollPosition + visibleWidth < totalContentWidth;\n    } else {\n      isOverflowStart = scrollPosition < 0;\n      isOverflowEnd = scrollPosition !== -(totalContentWidth - visibleWidth);\n    }\n\n    this.hasOverflowingStartTabTitle = isOverflowStart;\n    this.hasOverflowingEndTabTitle = isOverflowEnd;\n  }\n\n  private scrollToTabTitles = (direction: \"forward\" | \"backward\"): void => {\n    readTask(() => {\n      const tabTitleContainer = this.tabTitleContainerEl;\n      const containerBounds = tabTitleContainer.getBoundingClientRect();\n      const tabTitles = Array.from(this.el.querySelectorAll(\"calcite-tab-title\"));\n      const { effectiveDir } = this;\n\n      if (direction === \"forward\") {\n        tabTitles.reverse();\n      }\n\n      let closestToEdge: HTMLCalciteTabTitleElement = null;\n\n      tabTitles.forEach((tabTitle) => {\n        const tabTitleBounds = tabTitle.getBoundingClientRect();\n        const containerEndX = containerBounds.x + containerBounds.width;\n        const tabTitleEndX = tabTitleBounds.x + tabTitleBounds.width;\n\n        if (\n          (direction === \"forward\" && effectiveDir === \"ltr\") ||\n          (direction === \"backward\" && effectiveDir === \"rtl\")\n        ) {\n          const afterContainerEnd = tabTitleBounds.x > containerEndX;\n\n          if (afterContainerEnd) {\n            closestToEdge = tabTitle;\n          } else {\n            const crossingContainerEnd =\n              tabTitleEndX > containerEndX && tabTitleBounds.x > containerBounds.x;\n\n            if (crossingContainerEnd) {\n              closestToEdge = tabTitle;\n            }\n          }\n        } else {\n          const beforeContainerStart = tabTitleEndX < containerBounds.x;\n\n          if (beforeContainerStart) {\n            closestToEdge = tabTitle;\n          } else {\n            const crossingContainerStart =\n              tabTitleEndX < containerEndX && tabTitleBounds.x < containerBounds.x;\n\n            if (crossingContainerStart) {\n              closestToEdge = tabTitle;\n            }\n          }\n        }\n      });\n\n      if (closestToEdge) {\n        const { scrollerButtonWidth } = this;\n        const offsetAdjustment =\n          (direction === \"forward\" && effectiveDir === \"ltr\") ||\n          (direction === \"backward\" && effectiveDir === \"rtl\")\n            ? -scrollerButtonWidth\n            : closestToEdge.offsetWidth - tabTitleContainer.clientWidth + scrollerButtonWidth;\n        const scrollTo = closestToEdge.offsetLeft + offsetAdjustment;\n\n        tabTitleContainer.scrollTo({\n          left: scrollTo,\n          behavior: \"smooth\",\n        });\n      }\n    });\n  };\n\n  private scrollToNextTabTitles = (): void => this.scrollToTabTitles(\"forward\");\n\n  private scrollToPreviousTabTitles = (): void => this.scrollToTabTitles(\"backward\");\n\n  handleTabFocus = (\n    event: CustomEvent,\n    el: HTMLCalciteTabTitleElement,\n    destination: FocusElementInGroupDestination,\n  ): void => {\n    const focused = focusElementInGroup<HTMLCalciteTabTitleElement>(\n      this.enabledTabTitles,\n      el,\n      destination,\n    );\n    this.scrollTabTitleIntoView(focused, \"instant\");\n\n    event.stopPropagation();\n  };\n\n  getIndexOfTabTitle(el: HTMLCalciteTabTitleElement, tabTitles = this.tabTitles): number {\n    // In most cases, since these indexes correlate with tab contents, we want to consider all tab titles.\n    // However, when doing relative index operations, it makes sense to pass in this.enabledTabTitles as the 2nd arg.\n    return tabTitles.indexOf(el);\n  }\n\n  private onTabTitleScroll = (): void => {\n    this.updateActiveIndicator();\n    this.updateScrollingState();\n  };\n\n  async getTabTitleById(id: TabID): Promise<HTMLCalciteTabTitleElement | null> {\n    return Promise.all(this.tabTitles.map((el) => el.getTabIdentifier())).then((ids) => {\n      return this.tabTitles[ids.indexOf(id)];\n    });\n  }\n\n  get tabTitles(): HTMLCalciteTabTitleElement[] {\n    return filterDirectChildren<HTMLCalciteTabTitleElement>(this.el, \"calcite-tab-title\");\n  }\n\n  get enabledTabTitles(): HTMLCalciteTabTitleElement[] {\n    return filterDirectChildren<HTMLCalciteTabTitleElement>(\n      this.el,\n      \"calcite-tab-title:not([disabled])\",\n    ).filter((tabTitle) => !tabTitle.closed);\n  }\n\n  private handleTabTitleClose(closedTabTitleEl: HTMLCalciteTabTitleElement): void {\n    const { tabTitles } = this;\n    const selectionModified = closedTabTitleEl.selected;\n\n    const visibleTabTitlesIndices = tabTitles.reduce(\n      (tabTitleIndices: number[], tabTitle, index) =>\n        !tabTitle.closed ? [...tabTitleIndices, index] : tabTitleIndices,\n      [],\n    );\n    const totalVisibleTabTitles = visibleTabTitlesIndices.length;\n\n    if (totalVisibleTabTitles === 1 && tabTitles[visibleTabTitlesIndices[0]].closable) {\n      tabTitles[visibleTabTitlesIndices[0]].closable = false;\n      this.selectedTabId = visibleTabTitlesIndices[0];\n\n      if (selectionModified) {\n        tabTitles[visibleTabTitlesIndices[0]].activateTab();\n      }\n    } else if (totalVisibleTabTitles > 1) {\n      const closedTabTitleIndex = tabTitles.findIndex((el) => el === closedTabTitleEl);\n\n      const nextTabTitleIndex = visibleTabTitlesIndices.find(\n        (value) => value > closedTabTitleIndex,\n      );\n\n      if (this.selectedTabId === closedTabTitleIndex) {\n        this.selectedTabId = nextTabTitleIndex ? nextTabTitleIndex : totalVisibleTabTitles - 1;\n        tabTitles[this.selectedTabId].activateTab();\n      }\n    }\n\n    requestAnimationFrame(() => {\n      this.updateActiveIndicator();\n      tabTitles[this.selectedTabId].focus();\n    });\n  }\n\n  private renderScrollButton = (overflowDirection: \"start\" | \"end\"): VNode => {\n    const { bordered, messages, hasOverflowingStartTabTitle, hasOverflowingEndTabTitle, scale } =\n      this;\n    const isEnd = overflowDirection === \"end\";\n\n    return (\n      <div\n        class={{\n          [CSS.scrollButtonContainer]: true,\n          [CSS.scrollBackwardContainerButton]: !isEnd,\n          [CSS.scrollForwardContainerButton]: isEnd,\n        }}\n        hidden={(isEnd && !hasOverflowingEndTabTitle) || (!isEnd && !hasOverflowingStartTabTitle)}\n        key={overflowDirection}\n      >\n        <calcite-button\n          appearance={bordered ? \"outline-fill\" : \"transparent\"}\n          aria-label={isEnd ? messages.nextTabTitles : messages.previousTabTitles}\n          class={{\n            [CSS.scrollButton]: true,\n          }}\n          iconFlipRtl=\"both\"\n          iconStart={isEnd ? ICON.chevronRight : ICON.chevronLeft}\n          kind=\"neutral\"\n          onClick={isEnd ? this.scrollToNextTabTitles : this.scrollToPreviousTabTitles}\n          scale={scale}\n          tabIndex={-1}\n        />\n      </div>\n    );\n  };\n}\n","export const CSS = {\n  closeButton: \"close-button\",\n  container: \"container\",\n  content: \"content\",\n  contentHasText: \"content--has-text\",\n  iconEnd: \"icon-end\",\n  iconPresent: \"icon-present\",\n  iconStart: \"icon-start\",\n  titleIcon: \"calcite-tab-title--icon\",\n};\n\nexport const ICONS = {\n  close: \"x\",\n};\n","/**\n * CSS Custom Properties\n *\n * These properties can be overridden using the component's tag as selector.\n *\n * @prop --calcite-tab-title-background-color: Specifies the background color of the component.\n * @prop --calcite-tab-title-close-button-background-color-active: Specifies the background color of the close button when active.\n * @prop --calcite-tab-title-close-button-background-color-focus: Specifies the background color of the close button when focused.\n * @prop --calcite-tab-title-close-button-background-color-hover: Specifies the background color of the close button when hovered.\n * @prop --calcite-tab-title-close-button-background-color: Specifies the background color of the close button.\n * @prop --calcite-tab-title-close-button-icon-color-active: Specifies the icon color of the close button when active.\n * @prop --calcite-tab-title-close-button-icon-color-focus: Specifies the icon color of the close button when focused.\n * @prop --calcite-tab-title-close-button-icon-color-hover: Specifies the icon color of the close button when hovered.\n * @prop --calcite-tab-title-close-button-icon-color: Specifies the icon color of the close button.\n * @prop --calcite-tab-title-icon-color: Specifies the icon color of the component.\n * @prop --calcite-tab-title-text-color: Specifies the text color of the component.\n *\n */\n\n:host {\n  @apply block outline-none;\n  margin-inline-start: theme(\"margin.0\");\n}\n\n:host([layout=\"inline\"]) {\n  @apply flex-initial;\n}\n\n:host([layout=\"center\"]) {\n  @apply flex-auto;\n}\n\n.content {\n  @apply flex items-center justify-center;\n}\n\n.scale-s {\n  .content {\n    @apply text-n2h py-1;\n  }\n}\n\n.scale-m {\n  .content {\n    @apply text-n1h py-2;\n  }\n}\n\n.scale-l {\n  .content {\n    @apply text-0h py-2.5;\n  }\n}\n\n:host([closable]) .content {\n  @apply h-full box-border border-b-color-transparent;\n}\n\n:host([layout=\"inline\"]),\n:host([layout=\"center\"]) {\n  .content {\n    @apply px-1;\n  }\n}\n\n:host([layout=\"center\"]) .scale-s,\n:host([layout=\"center\"]) .scale-m,\n:host([layout=\"center\"]) .scale-l {\n  @apply justify-center my-0 text-center;\n\n  .content {\n    @apply flex-auto flex-grow;\n  }\n}\n\n.container {\n  @apply border-b-2\n  border-b-color-transparent\n  box-border\n  content-center\n  cursor-pointer\n  flex\n  focus-base\n  h-full\n  justify-between\n  px-0\n  text-n1h\n  transition-default\n  w-full;\n\n  border-block-end-style: solid;\n  color: var(--calcite-tab-title-text-color, var(--calcite-color-text-3));\n}\n\n:host([position=\"bottom\"]) .container {\n  @apply border-t-color-transparent\n    border-b-0\n    border-t-2;\n  border-block-start-style: solid;\n}\n\n:host([closed]) {\n  @apply hidden;\n}\n\n:host([selected]) .container {\n  @apply border-color-transparent;\n  color: var(--calcite-tab-title-text-color, var(--calcite-color-text-1));\n}\n\n:host(:focus) .container {\n  @apply focus-inset;\n\n  &:focus-within {\n    @apply focus-base;\n  }\n}\n\n@include disabled() {\n  .container {\n    @apply pointer-events-none opacity-50;\n  }\n}\n\n.calcite-tab-title--icon {\n  --calcite-icon-color: var(--calcite-tab-title-icon-color, currentcolor);\n\n  @apply relative\n    m-0\n    inline-flex\n    self-center;\n  & svg {\n    @apply transition-default;\n  }\n}\n\n.content--has-text {\n  @apply p-1;\n}\n\n.content--has-text .calcite-tab-title--icon.icon-start {\n  margin-inline-end: theme(\"margin.2\");\n}\n\n.content--has-text .calcite-tab-title--icon.icon-end {\n  margin-inline-start: theme(\"margin.2\");\n}\n\n.close-button {\n  @apply appearance-none\n  border-none\n  content-center\n  cursor-pointer\n  flex\n  focus-base\n  items-center\n  justify-center\n  p-1\n  self-center\n  transition-default;\n\n  background-color: var(--calcite-tab-title-close-button-background-color, var(--calcite-color-transparent));\n  color: var(--calcite-tab-title-close-button-icon-color, var(--calcite-color-text-3));\n\n  margin-inline-start: auto;\n\n  &:focus {\n    background-color: var(--calcite-tab-title-close-button-background-color-focus, var(--calcite-color-foreground-2));\n    color: var(--calcite-tab-title-close-button-icon-color-focus, var(--calcite-text-color-1));\n\n    @apply focus-inset;\n\n    // overriding outline-offset should be avoided as it won't honor --calcite-color-focus-offset-invert\n    outline-offset: -1px;\n  }\n\n  &:hover {\n    background-color: var(--calcite-tab-title-close-button-background-color-hover, var(--calcite-color-foreground-2));\n    color: var(--calcite-tab-title-close-button-icon-color-hover, var(--calcite-text-color-1));\n  }\n\n  &:active {\n    background-color: var(--calcite-tab-title-close-button-background-color-active, var(--calcite-color-foreground-3));\n    color: var(--calcite-tab-title-close-button-icon-color-active, var(--calcite-text-color-1));\n  }\n\n  calcite-icon {\n    color: inherit;\n  }\n}\n\n// compensate for spacing when no hastext and two icons\n:host([icon-start][icon-end]) {\n  .calcite-tab-title--icon:first-child {\n    margin-inline-end: theme(\"margin.2\");\n  }\n}\n\n// bordered styles\n:host([bordered]) {\n  margin-inline-end: 0;\n}\n\n:host([bordered][selected]) {\n  // we use the background color defined on tabs\n  box-shadow: inset 0 -2px var(--calcite-internal-tabs-background-color);\n}\n\n:host([bordered][selected][position=\"bottom\"]) {\n  // we use the background color defined on tabs\n  box-shadow: inset 0 2px var(--calcite-internal-tabs-background-color);\n}\n\n:host([bordered]:hover) {\n  .container {\n    background-color: var(--calcite-tab-title-background-color, var(--calcite-color-transparent-hover));\n  }\n}\n\n:host([closable]) .container,\n:host([bordered]) .container {\n  border-inline-start: 1px solid transparent;\n  border-inline-end: 1px solid transparent;\n  .close-button {\n    margin-inline: 0;\n  }\n}\n\n:host([closable][position=\"bottom\"]) .container,\n:host([bordered][position=\"bottom\"]) .container {\n  border-block-start-style: unset;\n}\n\n:host([selected][bordered]) .container {\n  border-inline-color: var(--calcite-internal-tabs-border-color);\n}\n\n:host([layout=\"inline\"][bordered]),\n:host([layout=\"center\"][bordered]) {\n  .scale-m {\n    .content {\n      @apply px-3;\n    }\n  }\n\n  .scale-s {\n    .content {\n      @apply px-2;\n    }\n  }\n\n  .scale-l {\n    .content {\n      @apply px-4;\n    }\n  }\n}\n\n:host([layout=\"inline\"][closable]) {\n  .scale-s,\n  .scale-m,\n  .scale-l {\n    .content {\n      padding-inline-end: 0;\n    }\n  }\n}\n\n@media (forced-colors: active) {\n  :host {\n    outline-width: 0;\n    outline-offset: 0;\n  }\n\n  :host(:focus) .container {\n    outline-color: highlight;\n  }\n\n  :host([bordered]) .container {\n    border-block-end-style: solid;\n  }\n\n  :host([bordered][position=\"bottom\"]) .container {\n    border-block-start-style: solid;\n  }\n\n  :host([bordered][selected]) .container {\n    border-block-end-style: none;\n  }\n\n  :host([bordered][position=\"bottom\"][selected]) .container {\n    border-block-start-style: none;\n  }\n\n  .close-button {\n    /* in high contrast the tab title outline covers the close button outline without a z-index */\n    @apply z-default;\n  }\n}\n\ncalcite-icon {\n  // TODO: add sub-component tokens\n}\n\n@include base-component();\n","import {\n  Build,\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport { getElementDir, toAriaBoolean, nodeListToArray } from \"../../utils/dom\";\nimport { guid } from \"../../utils/guid\";\nimport {\n  connectInteractive,\n  disconnectInteractive,\n  InteractiveComponent,\n  InteractiveContainer,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\nimport { createObserver } from \"../../utils/observers\";\nimport { FlipContext, Scale } from \"../interfaces\";\nimport { TabChangeEventDetail, TabCloseEventDetail } from \"../tab/interfaces\";\nimport { TabID, TabLayout, TabPosition } from \"../tabs/interfaces\";\nimport { connectLocalized, disconnectLocalized, LocalizedComponent } from \"../../utils/locale\";\nimport {\n  connectMessages,\n  disconnectMessages,\n  setUpMessages,\n  T9nComponent,\n  updateMessages,\n} from \"../../utils/t9n\";\nimport { getIconScale } from \"../../utils/component\";\nimport { TabTitleMessages } from \"./assets/tab-title/t9n\";\nimport { CSS, ICONS } from \"./resources\";\n\n/**\n * Tab-titles are optionally individually closable.\n */\n\n/**\n * @slot - A slot for adding text.\n */\n@Component({\n  tag: \"calcite-tab-title\",\n  styleUrl: \"tab-title.scss\",\n  shadow: true,\n  assetsDirs: [\"assets\"],\n})\nexport class TabTitle implements InteractiveComponent, LocalizedComponent, T9nComponent {\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * When `true`, the component and its respective `calcite-tab` contents are selected.\n   *\n   * Only one tab can be selected within the `calcite-tabs` parent.\n   */\n  @Prop({ reflect: true, mutable: true }) selected = false;\n\n  @Watch(\"selected\")\n  selectedHandler(): void {\n    if (this.selected) {\n      this.activateTab(false);\n    }\n  }\n\n  /** When `true`, a close button is added to the component. */\n  @Prop({ reflect: true }) closable = false;\n\n  /** When `true`, does not display or position the component. */\n  @Prop({ reflect: true, mutable: true }) closed = false;\n\n  /** When `true`, interaction is prevented and the component is displayed with lower opacity.  */\n  @Prop({ reflect: true }) disabled = false;\n\n  /** Specifies an icon to display at the end of the component. */\n  @Prop({ reflect: true }) iconEnd: string;\n\n  /** Displays the `iconStart` and/or `iconEnd` as flipped when the element direction is right-to-left (`\"rtl\"`). */\n  @Prop({ reflect: true }) iconFlipRtl: FlipContext;\n\n  /** Specifies an icon to display at the start of the component. */\n  @Prop({ reflect: true }) iconStart: string;\n\n  /**\n   * @internal\n   */\n  @Prop({ reflect: true, mutable: true }) layout: TabLayout;\n\n  /**\n   * Specifies the position of `calcite-tab-nav` and `calcite-tab-title` components in relation to, and is inherited from the parent `calcite-tabs`, defaults to `top`.\n   *\n   *  @internal\n   */\n  @Prop({ reflect: true }) position: TabPosition = \"top\";\n\n  /**\n   * Specifies the size of the component inherited from the parent `calcite-tabs`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  /**\n   * @internal\n   */\n  @Prop({ reflect: true, mutable: true }) bordered = false;\n\n  /**\n   * Specifies a unique name for the component.\n   *\n   * When specified, use the same value on the `calcite-tab`.\n   */\n  @Prop({ reflect: true }) tab: string;\n\n  /**\n   * Made into a prop for testing purposes only\n   *\n   * @internal\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messages: TabTitleMessages;\n\n  /**\n   * Use this property to override individual strings used by the component.\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messageOverrides: Partial<TabTitleMessages>;\n\n  @Watch(\"messageOverrides\")\n  onMessagesChange(): void {\n    /* wired up by t9n util */\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    connectInteractive(this);\n    connectLocalized(this);\n    connectMessages(this);\n    this.setupTextContentObserver();\n    this.parentTabNavEl = this.el.closest(\"calcite-tab-nav\");\n    this.parentTabsEl = this.el.closest(\"calcite-tabs\");\n  }\n\n  disconnectedCallback(): void {\n    this.mutationObserver?.disconnect();\n    // Dispatching to body in order to be listened by other elements that are still connected to the DOM.\n    document.body?.dispatchEvent(\n      new CustomEvent(\"calciteTabTitleUnregister\", {\n        detail: this.el,\n      }),\n    );\n    this.resizeObserver?.disconnect();\n    disconnectInteractive(this);\n    disconnectLocalized(this);\n    disconnectMessages(this);\n  }\n\n  async componentWillLoad(): Promise<void> {\n    await setUpMessages(this);\n    if (Build.isBrowser) {\n      this.updateHasText();\n    }\n    if (this.tab && this.selected) {\n      this.activateTab(false);\n    }\n  }\n\n  componentWillRender(): void {\n    if (this.parentTabsEl) {\n      this.layout = this.parentTabsEl.layout;\n      this.bordered = this.parentTabsEl.bordered;\n    }\n  }\n\n  render(): VNode {\n    const { el, closed } = this;\n    const id = el.id || this.guid;\n\n    const iconStartEl = (\n      <calcite-icon\n        class={{ [CSS.titleIcon]: true, [CSS.iconStart]: true }}\n        flipRtl={this.iconFlipRtl === \"start\" || this.iconFlipRtl === \"both\"}\n        icon={this.iconStart}\n        scale={getIconScale(this.scale)}\n      />\n    );\n\n    const iconEndEl = (\n      <calcite-icon\n        class={{ [CSS.titleIcon]: true, [CSS.iconEnd]: true }}\n        flipRtl={this.iconFlipRtl === \"end\" || this.iconFlipRtl === \"both\"}\n        icon={this.iconEnd}\n        scale={getIconScale(this.scale)}\n      />\n    );\n\n    return (\n      <Host\n        aria-controls={this.controls}\n        aria-selected={toAriaBoolean(this.selected)}\n        id={id}\n        role=\"tab\"\n        tabIndex={this.selected && !this.disabled ? 0 : -1}\n      >\n        <InteractiveContainer disabled={this.disabled}>\n          <div\n            class={{\n              container: true,\n              [CSS.iconPresent]: !!this.iconStart || !!this.iconEnd,\n              [`scale-${this.scale}`]: true,\n            }}\n            hidden={closed}\n            ref={(el) => this.resizeObserver?.observe(el)}\n          >\n            <div class={{ [CSS.content]: true, [CSS.contentHasText]: this.hasText }}>\n              {this.iconStart ? iconStartEl : null}\n              <slot />\n              {this.iconEnd ? iconEndEl : null}\n            </div>\n            {this.renderCloseButton()}\n          </div>\n        </InteractiveContainer>\n      </Host>\n    );\n  }\n\n  renderCloseButton(): VNode {\n    const { closable, messages } = this;\n\n    return closable ? (\n      <button\n        aria-label={messages.close}\n        class={CSS.closeButton}\n        disabled={false}\n        key={CSS.closeButton}\n        onClick={this.closeClickHandler}\n        ref={(el) => (this.closeButtonEl = el)}\n        title={messages.close}\n        type=\"button\"\n      >\n        <calcite-icon icon={ICONS.close} scale={getIconScale(this.scale)} />\n      </button>\n    ) : null;\n  }\n\n  async componentDidLoad(): Promise<void> {\n    this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier());\n  }\n\n  componentDidRender(): void {\n    updateHostInteraction(this);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"calciteInternalTabChange\", { target: \"body\" })\n  internalTabChangeHandler(event: CustomEvent<TabChangeEventDetail>): void {\n    const targetTabsEl = event\n      .composedPath()\n      .find((el: HTMLElement) => el.tagName === \"CALCITE-TABS\");\n\n    if (targetTabsEl !== this.parentTabsEl) {\n      return;\n    }\n\n    if (this.tab) {\n      this.selected = this.tab === event.detail.tab;\n    } else {\n      this.getTabIndex().then((index) => {\n        this.selected = index === event.detail.tab;\n      });\n    }\n\n    event.stopPropagation();\n  }\n\n  @Listen(\"click\")\n  onClick(): void {\n    this.activateTab();\n  }\n\n  @Listen(\"keydown\")\n  keyDownHandler(event: KeyboardEvent): void {\n    switch (event.key) {\n      case \" \":\n      case \"Enter\":\n        if (!event.composedPath().includes(this.closeButtonEl)) {\n          this.activateTab();\n          event.preventDefault();\n        }\n        break;\n      case \"ArrowRight\":\n        event.preventDefault();\n        if (getElementDir(this.el) === \"ltr\") {\n          this.calciteInternalTabsFocusNext.emit();\n        } else {\n          this.calciteInternalTabsFocusPrevious.emit();\n        }\n        break;\n      case \"ArrowLeft\":\n        event.preventDefault();\n        if (getElementDir(this.el) === \"ltr\") {\n          this.calciteInternalTabsFocusPrevious.emit();\n        } else {\n          this.calciteInternalTabsFocusNext.emit();\n        }\n        break;\n      case \"Home\":\n        event.preventDefault();\n        this.calciteInternalTabsFocusFirst.emit();\n        break;\n      case \"End\":\n        event.preventDefault();\n        this.calciteInternalTabsFocusLast.emit();\n        break;\n    }\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Fires when a `calcite-tab` is selected.\n   */\n  @Event({ cancelable: false }) calciteTabsActivate: EventEmitter<void>;\n\n  /**\n   * Fires when a `calcite-tab` is selected (`event.details`).\n   *\n   * @see [TabChangeEventDetail](https://github.com/Esri/calcite-design-system/blob/main/src/components/tab/interfaces.ts#L1)\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabsActivate: EventEmitter<TabChangeEventDetail>;\n\n  /**\n   * Fires when a `calcite-tab` is closed.\n   */\n  @Event({ cancelable: false }) calciteTabsClose: EventEmitter<void>;\n\n  /**\n   * Fires when `calcite-tab` is closed (`event.details`).\n   *\n   * @see [TabChangeEventDetail](https://github.com/Esri/calcite-design-system/blob/main/src/components/tab/interfaces.ts)\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabsClose: EventEmitter<TabCloseEventDetail>;\n  /**\n   * @internal\n   */\n\n  @Event({ cancelable: false }) calciteInternalTabsFocusNext: EventEmitter<void>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabsFocusPrevious: EventEmitter<void>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabsFocusFirst: EventEmitter<void>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabsFocusLast: EventEmitter<void>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabTitleRegister: EventEmitter<TabID>;\n\n  /**\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalTabIconChanged: EventEmitter<void>;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Returns the index of the title within the `calcite-tab-nav`.\n   */\n  @Method()\n  async getTabIndex(): Promise<number> {\n    return Array.prototype.indexOf.call(\n      nodeListToArray(this.el.parentElement.children).filter((el) =>\n        el.matches(\"calcite-tab-title\"),\n      ),\n      this.el,\n    );\n  }\n\n  /**\n   * @internal\n   */\n  @Method()\n  async getTabIdentifier(): Promise<TabID> {\n    return this.tab ? this.tab : this.getTabIndex();\n  }\n\n  /**\n   * @param tabIds\n   * @param titleIds\n   * @internal\n   */\n  @Method()\n  async updateAriaInfo(tabIds: string[] = [], titleIds: string[] = []): Promise<void> {\n    this.controls = tabIds[titleIds.indexOf(this.el.id)] || null;\n  }\n\n  /**\n   * This activates a tab in order for it and its associated tab-title be selected.\n   *\n   * @param userTriggered - when `true`, user-interaction events will be emitted in addition to internal events\n   * @internal\n   */\n  @Method()\n  async activateTab(userTriggered = true): Promise<void> {\n    if (this.disabled || this.closed) {\n      return;\n    }\n    const payload = { tab: this.tab };\n    this.calciteInternalTabsActivate.emit(payload);\n\n    if (userTriggered) {\n      // emit in the next frame to let internal events sync up\n      requestAnimationFrame(() => this.calciteTabsActivate.emit());\n    }\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  private closeClickHandler = (): void => {\n    this.closeTabTitleAndNotify();\n  };\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteTabTitleElement;\n\n  /** watches for changing text content */\n  mutationObserver: MutationObserver = createObserver(\"mutation\", () => this.updateHasText());\n\n  @State() controls: string;\n\n  @State() defaultMessages: TabTitleMessages;\n\n  @State() effectiveLocale: \"\";\n\n  @Watch(\"effectiveLocale\")\n  effectiveLocaleChange(): void {\n    updateMessages(this, this.effectiveLocale);\n  }\n\n  /** determine if there is slotted text for styling purposes */\n  @State() hasText = false;\n\n  closeButtonEl: HTMLButtonElement;\n\n  containerEl: HTMLDivElement;\n\n  parentTabNavEl: HTMLCalciteTabNavElement;\n\n  parentTabsEl: HTMLCalciteTabsElement;\n\n  resizeObserver = createObserver(\"resize\", () => {\n    this.calciteInternalTabIconChanged.emit();\n  });\n\n  updateHasText(): void {\n    this.hasText = this.el.textContent.trim().length > 0;\n  }\n\n  setupTextContentObserver(): void {\n    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n  }\n\n  closeTabTitleAndNotify(): void {\n    this.closed = true;\n    this.calciteInternalTabsClose.emit({ tab: this.tab });\n    this.calciteTabsClose.emit();\n  }\n\n  guid = `calcite-tab-title-${guid()}`;\n}\n","export const SLOTS = {\n  titleGroup: \"title-group\",\n};\n","/**\n * CSS Custom Properties\n *\n * These properties can be overridden using the component's tag as selector.\n *\n * @prop --calcite-tabs-background-color: The background color of the component.\n * @prop --calcite-tabs-border-color: The border color of the component.\n */\n\n:host {\n  @apply flex flex-col;\n\n  --calcite-internal-tabs-border-color: var(--calcite-tabs-border-color, var(--calcite-color-border-1));\n  --calcite-internal-tabs-background-color: var(--calcite-tabs-background-color, var(--calcite-color-foreground-1));\n}\n\n:host([bordered]) {\n  box-shadow: inset 0 1px 0 var(--calcite-internal-tabs-border-color);\n  background-color: var(--calcite-internal-tabs-background-color);\n\n  section {\n    border-color: var(--calcite-internal-tabs-border-color);\n    border-style: solid;\n  }\n\n  ::slotted(calcite-tab-nav) {\n    margin-block-end: -1px;\n  }\n}\n\nsection {\n  @apply border flex flex-grow overflow-hidden;\n\n  border-block-start-style: solid;\n  border-block-start-color: var(--calcite-internal-tabs-border-color);\n}\n\n:host([bordered][position=\"bottom\"]) {\n  box-shadow:\n    inset 0 1px 0 var(--calcite-internal-tabs-border-color),\n    inset 0 -1px 0 var(--calcite-internal-tabs-border-color);\n\n  ::slotted(calcite-tab-nav) {\n    margin-block-start: -1px;\n  }\n}\n\n:host([position=\"bottom\"]) {\n  @apply flex-col-reverse;\n\n  section {\n    @apply flex-col-reverse\n      border-t-0\n      border-b;\n\n    border-block-start-color: var(--calcite-internal-tabs-border-color);\n  }\n}\n\n:host([bordered][scale=\"s\"]) section {\n  @apply p-3;\n}\n\n:host([bordered][scale=\"m\"]) section {\n  @apply p-2;\n}\n\n:host([bordered][scale=\"l\"]) section {\n  @apply p-4;\n}\n\n:host([position=\"bottom\"]:not([bordered])) section {\n  border-block-end-style: solid;\n}\n\n@media (forced-colors: active) {\n  :host([bordered]) section {\n    @apply border-t-0\n      border-b;\n  }\n  :host([position=\"bottom\"][bordered]) section {\n    @apply border-t\n      border-b-0;\n  }\n}\n\n@include base-component();\n","import { Component, Element, Fragment, h, Listen, Prop, State, VNode, Watch } from \"@stencil/core\";\nimport { Scale } from \"../interfaces\";\nimport { createObserver } from \"../../utils/observers\";\nimport { TabLayout, TabPosition } from \"./interfaces\";\nimport { SLOTS } from \"./resources\";\n\n/**\n * @slot - A slot for adding `calcite-tab`s.\n * @slot title-group - A slot for adding a `calcite-tab-nav`.\n */\n@Component({\n  tag: \"calcite-tabs\",\n  styleUrl: \"tabs.scss\",\n  shadow: true,\n})\nexport class Tabs {\n  //--------------------------------------------------------------------------\n  //\n  //  Public Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Specifies the layout of the `calcite-tab-nav`, justifying the `calcite-tab-title`s to the start (`\"inline\"`), or across and centered (`\"center\"`).\n   */\n  @Prop({ reflect: true }) layout: TabLayout = \"inline\";\n\n  /**\n   * Specifies the position of `calcite-tab-nav` and `calcite-tab-title` components in relation to the `calcite-tabs`.\n   */\n  @Prop({ reflect: true }) position: TabPosition = \"top\";\n\n  /**\n   * Specifies the size of the component.\n   */\n  @Prop({ reflect: true }) scale: Scale = \"m\";\n\n  @Watch(\"position\")\n  @Watch(\"scale\")\n  handleInheritableProps(): void {\n    this.updateItems();\n  }\n\n  /**\n   * When `true`, the component will display with a folder style menu.\n   */\n  @Prop() bordered = false;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.mutationObserver.observe(this.el, { childList: true });\n    this.updateItems();\n  }\n\n  async componentWillLoad(): Promise<void> {\n    this.updateItems();\n  }\n\n  disconnectedCallback(): void {\n    this.mutationObserver?.disconnect();\n  }\n\n  render(): VNode {\n    return (\n      <Fragment>\n        <slot name={SLOTS.titleGroup} />\n        <section>\n          <slot />\n        </section>\n      </Fragment>\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * @param event\n   * @internal\n   */\n  @Listen(\"calciteInternalTabTitleRegister\")\n  calciteInternalTabTitleRegister(event: CustomEvent): void {\n    this.titles = [...this.titles, event.target as HTMLCalciteTabTitleElement];\n    this.registryHandler();\n    event.stopPropagation();\n  }\n\n  /**\n   * @param event\n   * @internal\n   */\n  @Listen(\"calciteTabTitleUnregister\", { target: \"body\" })\n  calciteTabTitleUnregister(event: CustomEvent): void {\n    this.titles = this.titles.filter((el) => el !== event.detail);\n    this.registryHandler();\n    event.stopPropagation();\n  }\n\n  /**\n   * @param event\n   * @internal\n   */\n  @Listen(\"calciteInternalTabRegister\")\n  calciteInternalTabRegister(event: CustomEvent): void {\n    this.tabs = [...this.tabs, event.target as HTMLCalciteTabElement];\n    this.registryHandler();\n    event.stopPropagation();\n  }\n\n  /**\n   * @param event\n   * @internal\n   */\n  @Listen(\"calciteTabUnregister\", { target: \"body\" })\n  calciteTabUnregister(event: CustomEvent): void {\n    this.tabs = this.tabs.filter((el) => el !== event.detail);\n    this.registryHandler();\n    event.stopPropagation();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteTabsElement;\n\n  /**\n   *\n   * Stores an array of ids of `<calcite-tab-titles>`s to match up ARIA\n   * attributes.\n   */\n  @State() titles: HTMLCalciteTabTitleElement[] = [];\n\n  /**\n   *\n   * Stores an array of ids of `<calcite-tab>`s to match up ARIA attributes.\n   */\n  @State() tabs: HTMLCalciteTabElement[] = [];\n\n  mutationObserver = createObserver(\"mutation\", (mutationsList: MutationRecord[]) => {\n    for (const mutation of mutationsList) {\n      const target = mutation.target as HTMLElement;\n      if (\n        target.nodeName === \"CALCITE-TAB-NAV\" ||\n        target.nodeName === \"CALCITE-TAB-TITLE\" ||\n        target.nodeName === \"CALCITE-TAB\"\n      ) {\n        this.updateItems();\n      }\n    }\n  });\n\n  private updateItems(): void {\n    const { position, scale } = this;\n\n    const nav = this.el.querySelector(\"calcite-tab-nav\");\n    if (nav) {\n      nav.position = position;\n      nav.scale = scale;\n    }\n\n    Array.from(this.el.querySelectorAll(\"calcite-tab\")).forEach((tab: HTMLCalciteTabElement) => {\n      if (tab.parentElement === this.el) {\n        tab.scale = scale;\n      }\n    });\n\n    Array.from(this.el.querySelectorAll(\"calcite-tab-nav > calcite-tab-title\")).forEach(\n      (title: HTMLCalciteTabTitleElement) => {\n        title.position = position;\n        title.scale = scale;\n      },\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   *\n   * Matches up elements from the internal `tabs` and `titles` to automatically\n   * update the ARIA attributes and link `<calcite-tab>` and\n   * `<calcite-tab-title>` components.\n   */\n  async registryHandler(): Promise<void> {\n    let tabIds;\n    let titleIds;\n\n    // determine if we are using `tab` based or `index` based tab identifiers.\n    if (this.tabs.some((el) => el.tab) || this.titles.some((el) => el.tab)) {\n      // if we are using `tab` based identifiers sort by `tab` to account for\n      // possible out of order tabs and get the id of each tab\n      tabIds = this.tabs.sort((a, b) => a.tab.localeCompare(b.tab)).map((el) => el.id);\n      titleIds = this.titles.sort((a, b) => a.tab.localeCompare(b.tab)).map((el) => el.id);\n    } else {\n      // if we are using index based tabs then the `<calcite-tab>` and\n      // `<calcite-tab-title>` might have been rendered out of order so the\n      // order of `this.tabs` and `this.titles` might not reflect the DOM state,\n      // and might not match each other so we need to get the index of all the\n      // tabs and titles in the DOM order to match them up as a source of truth\n      const tabDomIndexes = await Promise.all(this.tabs.map((el) => el.getTabIndex()));\n\n      const titleDomIndexes = await Promise.all(this.titles.map((el) => el.getTabIndex()));\n\n      // once we have the DOM order as a source of truth we can build the\n      // matching tabIds and titleIds arrays\n      tabIds = tabDomIndexes.reduce((ids, indexInDOM, registryIndex) => {\n        ids[indexInDOM] = this.tabs[registryIndex].id;\n        return ids;\n      }, []);\n\n      titleIds = titleDomIndexes.reduce((ids, indexInDOM, registryIndex) => {\n        ids[indexInDOM] = this.titles[registryIndex].id;\n        return ids;\n      }, []);\n    }\n\n    // pass all our new aria information to each `<calcite-tab>` and\n    // `<calcite-tab-title>` which will check if they can update their internal\n    // `controlled` or `labeledBy` states and re-render if necessary\n    this.tabs.forEach((el) => el.updateAriaInfo(tabIds, titleIds));\n    this.titles.forEach((el) => el.updateAriaInfo(tabIds, titleIds));\n  }\n}\n"],"mappings":"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"}