{"version":3,"names":["CSS","heading","container","indented","SLOTS","parentItem","mutationObserverCallback","this","setUpItems","setUpFilter","deselectRemovedItems","SUPPORTED_ARROW_KEYS","initialize","emitCalciteListChange","debounce","internalCalciteListChangeEvent","bind","emitCalciteListFilter","internalCalciteListFilterEvent","initializeObserver","mutationObserver","observe","el","childList","subtree","cleanUpObserver","disconnect","calciteListItemChangeHandler","event","selectedValues","item","value","selected","shiftPressed","detail","multiple","selectSiblings","deselectSiblingItems","set","delete","toggleSingleSelectItemTabbing","focusElement","lastSelectedItem","calciteInternalListItemValueChangeHandler","oldValue","has","get","newValue","stopPropagation","isValidNavigationKey","key","find","k","calciteListFocusOutHandler","items","focusedInside","contains","relatedTarget","filterOutDisabled","forEach","size","target","keyDownHandler","selectionFollowsFocus","length","totalItems","currentIndex","indexOf","preventDefault","index","moveItemIndex","i","list","direction","directionFactor","moveOffset","getRoundRobinIndex","firstMovedIndex","disabled","getItemIndex","filter","calciteListFilter","emit","calciteListChange","removeItem","defaultPrevented","parentElement","tagName","slot","remove","Array","from","children","selectable","removeAttribute","setAttribute","async","setFocus","focusId","filterEnabled","filterEl","filtered","focusTarget","querySelectorAll","hasSelected","icon","getIconType","deselectDisabled","first","itemValues","map","selectedItem","includes","currentItem","toggleSelected","deselect","start","findIndex","end","slice","Math","min","max","groups","handleFilter","filteredData","filterText","values","hasSelectedMatch","Set","matchedItems","parent","grouped","matches","add","hidden","group","hasAtLeastOneMatch","some","getSlotted","child","clear","setFilteredItems","handleInitialFilter","filteredItems","handleFilterEvent","currentTarget","getItemData","label","description","metadata","sticky","ICON_TYPES","circle","square","grip","menuActions","List","props","loading","dataForFilter","filterPlaceholder","setFilterEl","dragEnabled","storeAssistiveEl","rest","defaultSlot","h","Host","toAriaBoolean","role","InteractiveContainer","class","ref","onCalciteFilterChange","placeholder","name","actions","actionsEnd","actionsStart","handle","handleActivated","highlight","iconDot","title","textContainer","ICONS","checked"],"sources":["src/components/pick-list-group/resources.ts","src/components/pick-list/shared-list-logic.ts","src/components/pick-list/resources.ts","src/components/pick-list/shared-list-render.tsx","src/components/pick-list-item/resources.ts"],"sourcesContent":["export const CSS = {\n  heading: \"heading\",\n  container: \"container\",\n  indented: \"container--indented\",\n};\n\nexport const SLOTS = {\n  parentItem: \"parent-item\",\n};\n","import { debounce } from \"lodash-es\";\nimport { getRoundRobinIndex } from \"../../utils/array\";\nimport { focusElement, getSlotted } from \"../../utils/dom\";\nimport { SLOTS } from \"../pick-list-group/resources\";\nimport { ValueList } from \"../value-list/value-list\";\nimport { PickList } from \"./pick-list\";\n\ntype Lists = PickList | ValueList;\ntype ListItemElement<T> = T extends PickList ? HTMLCalcitePickListItemElement : HTMLCalciteValueListItemElement;\ntype List<T> = T extends PickList ? PickList : ValueList;\n\nexport type ListFocusId = \"filter\";\n\nexport function mutationObserverCallback<T extends Lists>(this: List<T>): void {\n  this.setUpItems();\n  this.setUpFilter();\n  this.deselectRemovedItems();\n}\n\nconst SUPPORTED_ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\"];\n\n// --------------------------------------------------------------------------\n//\n//  Lifecycle\n//\n// --------------------------------------------------------------------------\n\nexport function initialize<T extends Lists>(this: List<T>): void {\n  this.setUpItems();\n  this.setUpFilter();\n  this.emitCalciteListChange = debounce(internalCalciteListChangeEvent.bind(this), 0);\n  this.emitCalciteListFilter = debounce(internalCalciteListFilterEvent.bind(this), 0);\n}\n\nexport function initializeObserver<T extends Lists>(this: List<T>): void {\n  this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n}\n\nexport function cleanUpObserver<T extends Lists>(this: List<T>): void {\n  this.mutationObserver?.disconnect();\n}\n\n// --------------------------------------------------------------------------\n//\n//  Listeners\n//\n// --------------------------------------------------------------------------\n\nexport function calciteListItemChangeHandler<T extends Lists>(this: List<T>, event: CustomEvent): void {\n  const { selectedValues } = this;\n  const { item, value, selected, shiftPressed } = event.detail;\n\n  if (selected) {\n    if (this.multiple && shiftPressed) {\n      this.selectSiblings(item);\n    }\n\n    if (!this.multiple) {\n      this.deselectSiblingItems(item);\n    }\n\n    selectedValues.set(value, item);\n  } else {\n    selectedValues.delete(value);\n\n    if (this.multiple && shiftPressed) {\n      this.selectSiblings(item, true);\n    }\n  }\n\n  if (!this.multiple) {\n    toggleSingleSelectItemTabbing(item, selected);\n\n    if (selected) {\n      focusElement(item);\n    }\n  }\n\n  this.lastSelectedItem = item;\n  this.emitCalciteListChange();\n}\n\nexport function calciteInternalListItemValueChangeHandler<T extends Lists>(this: List<T>, event: CustomEvent): void {\n  const oldValue = event.detail.oldValue;\n  const selectedValues = this.selectedValues as Map<string, ListItemElement<T>>;\n\n  if (selectedValues.has(oldValue)) {\n    const item = selectedValues.get(oldValue);\n    selectedValues.delete(oldValue);\n    selectedValues.set(event.detail.newValue, item);\n  }\n  event.stopPropagation();\n}\n\n// --------------------------------------------------------------------------\n//\n//  Private Methods\n//\n// --------------------------------------------------------------------------\n\nfunction isValidNavigationKey(key: string): boolean {\n  return !!SUPPORTED_ARROW_KEYS.find((k) => k === key);\n}\n\nexport function calciteListFocusOutHandler<T extends Lists>(this: List<T>, event: FocusEvent): void {\n  const { el, items, multiple, selectedValues } = this;\n\n  if (multiple) {\n    return;\n  }\n\n  const focusedInside = el.contains(event.relatedTarget as Node | null);\n  if (focusedInside) {\n    return;\n  }\n\n  filterOutDisabled(items).forEach((item) => {\n    toggleSingleSelectItemTabbing(\n      item,\n      selectedValues.size === 0 ? item.contains(event.target as HTMLElement) || event.target === item : item.selected,\n    );\n  });\n}\n\nexport function keyDownHandler<T extends Lists>(this: List<T>, event: KeyboardEvent): void {\n  const { key, target } = event;\n\n  if (!isValidNavigationKey(key)) {\n    return;\n  }\n\n  const { items, multiple, selectionFollowsFocus } = this;\n  const { length: totalItems } = items;\n  const currentIndex = (items as ListItemElement<T>[]).indexOf(target as ListItemElement<T>);\n\n  if (!totalItems || currentIndex === -1) {\n    return;\n  }\n\n  event.preventDefault();\n\n  const index = moveItemIndex(this, target as ListItemElement<T>, key === \"ArrowUp\" ? \"up\" : \"down\");\n  const item = items[index];\n\n  items.forEach((i: HTMLCalcitePickListItemElement | HTMLCalciteValueListItemElement) =>\n    toggleSingleSelectItemTabbing(i, i === item),\n  );\n\n  if (!multiple && selectionFollowsFocus) {\n    item.selected = true;\n  }\n\n  focusElement(item);\n}\n\nexport function moveItemIndex<T extends Lists>(\n  list: List<T>,\n  item: ListItemElement<T>,\n  direction: \"up\" | \"down\",\n): number {\n  const { items } = list;\n  const { length: totalItems } = items;\n  const currentIndex = (items as ListItemElement<T>[]).indexOf(item);\n  const directionFactor = direction === \"up\" ? -1 : 1;\n  let moveOffset = 1;\n  let index = getRoundRobinIndex(currentIndex + directionFactor * moveOffset++, totalItems);\n  const firstMovedIndex = index;\n\n  while (items[index].disabled) {\n    index = getRoundRobinIndex(currentIndex + directionFactor * moveOffset++, totalItems);\n\n    if (index === firstMovedIndex) {\n      break;\n    }\n  }\n\n  return index;\n}\n\nexport function getItemIndex<T extends Lists>(list: List<T>, item: ListItemElement<T>): number {\n  const { items } = list;\n  return (items as ListItemElement<T>[]).indexOf(item);\n}\n\nfunction filterOutDisabled<T extends Lists>(items: ListItemElement<T>[]): ListItemElement<T>[] {\n  return items.filter((item) => !item.disabled);\n}\n\nexport function internalCalciteListFilterEvent<T extends Lists>(this: List<T>): void {\n  this.calciteListFilter.emit();\n}\n\nexport function internalCalciteListChangeEvent<T extends Lists>(this: List<T>): void {\n  this.calciteListChange.emit(this.selectedValues as any);\n}\n\nexport function removeItem<T extends Lists, U extends ListItemElement<T>>(this: List<T>, event: CustomEvent): void {\n  if (event.defaultPrevented) {\n    return;\n  }\n\n  const item = event.target as U;\n  const selectedValues = this.selectedValues as Map<string, U>;\n\n  if (item.parentElement.tagName === \"CALCITE-PICK-LIST-GROUP\" && item.slot === SLOTS.parentItem) {\n    item.parentElement.remove();\n    Array.from(item.parentElement.children).forEach((item: U) => selectedValues.delete(item.value));\n  } else {\n    item.remove();\n    selectedValues.delete(item.value);\n  }\n\n  this.emitCalciteListChange();\n}\n\nfunction toggleSingleSelectItemTabbing<T extends Lists>(item: ListItemElement<T>, selectable: boolean): void {\n  if (item.disabled) {\n    return;\n  }\n\n  // using attribute intentionally\n  if (selectable) {\n    item.removeAttribute(\"tabindex\");\n  } else {\n    item.setAttribute(\"tabindex\", \"-1\");\n  }\n}\n\nexport async function setFocus<T extends Lists>(this: List<T>, focusId: ListFocusId): Promise<void> {\n  if (this.filterEnabled && focusId === \"filter\") {\n    await focusElement(this.filterEl);\n    return;\n  }\n\n  const { items, multiple, selectionFollowsFocus } = this;\n\n  if (items.length === 0) {\n    return;\n  }\n\n  if (multiple) {\n    return filterOutDisabled(items)[0]?.setFocus();\n  }\n\n  const filtered = filterOutDisabled(items);\n  const focusTarget = filtered.find((item) => item.selected) || filtered[0];\n\n  if (selectionFollowsFocus && focusTarget) {\n    focusTarget.selected = true;\n  }\n\n  return focusTarget.setFocus();\n}\n\nexport function setUpItems<T extends Lists>(\n  this: List<T>,\n  tagName: T extends PickList ? \"calcite-pick-list-item\" : \"calcite-value-list-item\",\n): void {\n  (this.items as ListItemElement<T>[]) = Array.from(this.el.querySelectorAll<ListItemElement<T>>(tagName));\n  let hasSelected = false;\n\n  const { items } = this;\n\n  items.forEach((item) => {\n    item.icon = this.getIconType();\n    if (!this.multiple) {\n      item.deselectDisabled = true;\n      toggleSingleSelectItemTabbing(item, false);\n    }\n    if (item.selected) {\n      hasSelected = true;\n      toggleSingleSelectItemTabbing(item, true);\n      this.selectedValues.set(item.value, item);\n    }\n  });\n\n  const [first] = items;\n\n  if (!hasSelected && first && !first.disabled) {\n    toggleSingleSelectItemTabbing(first, true);\n  }\n}\n\nexport function setUpFilter<T extends Lists>(this: List<T>): void {\n  if (this.filterEnabled) {\n    this.dataForFilter = this.getItemData();\n  }\n}\n\nexport function deselectRemovedItems<T extends Lists>(this: List<T>): void {\n  const selectedValues = this.selectedValues as Map<string, ListItemElement<T>>;\n  const itemValues = this.items.map(({ value }) => value);\n\n  selectedValues.forEach((selectedItem) => {\n    if (!itemValues.includes(selectedItem.value)) {\n      this.selectedValues.delete(selectedItem.value);\n    }\n  });\n}\n\nexport function deselectSiblingItems<T extends Lists>(this: List<T>, item: ListItemElement<T>): void {\n  this.items.forEach((currentItem) => {\n    if (currentItem.value !== item.value) {\n      currentItem.toggleSelected(false);\n      if (this.selectedValues.has(currentItem.value)) {\n        this.selectedValues.delete(currentItem.value);\n      }\n    }\n  });\n}\n\nexport function selectSiblings<T extends Lists>(this: List<T>, item: ListItemElement<T>, deselect = false): void {\n  if (!this.lastSelectedItem) {\n    return;\n  }\n  const { items } = this;\n  const start = items.findIndex((currentItem) => {\n    return currentItem.value === this.lastSelectedItem.value;\n  });\n  const end = items.findIndex((currentItem) => {\n    return currentItem.value === item.value;\n  });\n  items.slice(Math.min(start, end), Math.max(start, end)).forEach((currentItem) => {\n    currentItem.toggleSelected(!deselect);\n    if (!deselect) {\n      this.selectedValues.set(currentItem.value, currentItem);\n    } else {\n      this.selectedValues.delete(currentItem.value);\n    }\n  });\n}\n\nlet groups: Set<HTMLCalcitePickListGroupElement>;\n\nexport function handleFilter<T extends Lists>(this: List<T>, emit = false): void {\n  const { filteredData, filterText } = this;\n\n  const values = filteredData.map((item: ItemData[number]) => item.value);\n  let hasSelectedMatch = false;\n\n  if (!groups) {\n    groups = new Set<HTMLCalcitePickListGroupElement>();\n  }\n\n  const matchedItems =\n    (this.items as ListItemElement<T>[])?.filter((item) => {\n      const parent = item.parentElement;\n      const grouped = parent.matches(\"calcite-pick-list-group\");\n\n      if (grouped) {\n        groups.add(parent as HTMLCalcitePickListGroupElement);\n      }\n\n      const matches = filterText ? values.includes(item.value) : true;\n\n      item.hidden = !matches;\n\n      if (!hasSelectedMatch) {\n        hasSelectedMatch = matches && item.selected;\n      }\n\n      return matches;\n    }) || [];\n\n  groups.forEach((group) => {\n    const hasAtLeastOneMatch = matchedItems.some((item) => group.contains(item));\n    group.hidden = !hasAtLeastOneMatch;\n\n    if (!hasAtLeastOneMatch) {\n      return;\n    }\n\n    const parentItem = getSlotted<ListItemElement<T>>(group, \"parent-item\");\n\n    if (parentItem) {\n      parentItem.hidden = false;\n\n      if (matchedItems.includes(parentItem)) {\n        Array.from(group.children as HTMLCollectionOf<HTMLCalcitePickListElement>).forEach(\n          (child) => (child.hidden = false),\n        );\n      }\n    }\n  });\n\n  groups.clear();\n\n  if (matchedItems.length > 0 && !hasSelectedMatch && !this.multiple) {\n    toggleSingleSelectItemTabbing(matchedItems[0], true);\n  }\n\n  this.setFilteredItems(matchedItems as any[]);\n\n  if (emit) {\n    this.emitCalciteListFilter();\n  }\n}\n\nexport function handleInitialFilter<T extends Lists>(this: List<T>): void {\n  const filteredItems = this.filterEl?.filteredItems as ItemData;\n\n  if (filteredItems) {\n    this.filteredData = filteredItems;\n  }\n\n  this.handleFilter();\n}\n\nexport function handleFilterEvent<T extends Lists>(this: List<T>, event: CustomEvent): void {\n  event.stopPropagation();\n  const { filteredItems, value } = event.currentTarget as HTMLCalciteFilterElement;\n\n  this.filterText = value;\n  this.filteredData = filteredItems as ItemData;\n\n  this.handleFilter(true);\n}\n\nexport type ItemData = {\n  label: string;\n  description: string;\n  metadata: Record<string, unknown>;\n  value: string;\n}[];\n\nexport function getItemData<T extends Lists>(this: List<T>): ItemData {\n  return (this.items as ListItemElement<T>[]).map((item) => ({\n    label: item.label,\n    description: item.description,\n    metadata: item.metadata,\n    value: item.value,\n  }));\n}\n","import { ValueUnion } from \"../types\";\n\nexport const CSS = {\n  sticky: \"sticky-pos\",\n};\n\nexport const ICON_TYPES = {\n  circle: \"circle\",\n  square: \"square\",\n  grip: \"grip\",\n};\n\nexport type ICON_TYPES = ValueUnion<typeof ICON_TYPES>;\n\nexport const TEXT = {\n  filterResults: \"Filter results\",\n};\n\nexport const SLOTS = {\n  menuActions: \"menu-actions\",\n};\n","import { FunctionalComponent, h, Host, VNode } from \"@stencil/core\";\nimport { JSXBase } from \"@stencil/core/internal\";\nimport { toAriaBoolean } from \"../../utils/dom\";\nimport { InteractiveContainer } from \"../../utils/interactive\";\nimport { CSS, SLOTS } from \"./resources\";\nimport { handleFilter, handleFilterEvent } from \"./shared-list-logic\";\n\ntype DOMAttributes = JSXBase.DOMAttributes<any>;\n\ninterface ListProps extends DOMAttributes {\n  disabled: boolean;\n  loading: boolean;\n  filterEnabled: boolean;\n  filterText: string;\n  dataForFilter: any;\n  handleFilter: typeof handleFilter;\n  handleFilterEvent: typeof handleFilterEvent;\n  filterPlaceholder: string;\n  el: HTMLCalcitePickListElement | HTMLCalciteValueListElement;\n  setFilterEl: (el: HTMLCalciteFilterElement) => void;\n  setFilteredItems: (\n    filteredItems: HTMLCalcitePickListItemElement | HTMLCalciteValueListItemElement[],\n  ) => void;\n  dragEnabled?: boolean;\n  storeAssistiveEl?: (el: HTMLSpanElement) => void;\n}\n\nexport const List: FunctionalComponent<{ props: ListProps } & DOMAttributes> = ({\n  props: {\n    disabled,\n    loading,\n    filterEnabled,\n    dataForFilter,\n    handleFilterEvent,\n    filterPlaceholder,\n    filterText,\n    setFilterEl,\n    dragEnabled,\n    storeAssistiveEl,\n  },\n  ...rest\n}): VNode => {\n  const defaultSlot = <slot />;\n  return (\n    <Host aria-busy={toAriaBoolean(loading)} role=\"menu\" {...rest}>\n      <InteractiveContainer disabled={disabled}>\n        <section>\n          {dragEnabled ? (\n            <span aria-live=\"assertive\" class=\"assistive-text\" ref={storeAssistiveEl} />\n          ) : null}\n          <header class={{ [CSS.sticky]: true }}>\n            {filterEnabled ? (\n              <calcite-filter\n                aria-label={filterPlaceholder}\n                disabled={disabled}\n                items={dataForFilter}\n                onCalciteFilterChange={handleFilterEvent}\n                placeholder={filterPlaceholder}\n                ref={setFilterEl}\n                value={filterText}\n              />\n            ) : null}\n            <slot name={SLOTS.menuActions} />\n          </header>\n          {loading ? <calcite-scrim loading={loading} /> : null}\n          {defaultSlot}\n        </section>\n      </InteractiveContainer>\n    </Host>\n  );\n};\n\nexport default List;\n","export const CSS = {\n  actions: \"actions\",\n  actionsEnd: \"actions--end\",\n  actionsStart: \"actions--start\",\n  description: \"description\",\n  handle: \"handle\",\n  handleActivated: \"handle--activated\",\n  highlight: \"highlight\",\n  icon: \"icon\",\n  iconDot: \"icon-dot\",\n  label: \"label\",\n  remove: \"remove\",\n  title: \"title\",\n  textContainer: \"text-container\",\n};\n\nexport const ICONS = {\n  checked: \"check\",\n  remove: \"x\",\n};\n\nexport const SLOTS = {\n  actionsEnd: \"actions-end\",\n  actionsStart: \"actions-start\",\n};\n"],"mappings":"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"}