$floating-ui-transform-bottom: translateY(-5px);
$floating-ui-transform-top: translateY(5px);
$floating-ui-transform-left: translateX(5px);
$floating-ui-transform-right: translateX(-5px);

@mixin floatingUIAnim($boxShadow, $borderRadius, $borderWidth, $borderColor, $backgroundColor) {
  .calcite-floating-ui-anim {
    position: relative;
    transition: var(--calcite-animation-timing);
    transition-property: transform, visibility, opacity;
    opacity: 0;
    border-style: solid;
    border-width: var(#{$borderWidth});
    box-shadow: var(#{$boxShadow});
    border-radius: var(#{$borderRadius});
    z-index: var(--calcite-z-index);
    background-color: var(#{$backgroundColor});
    border-color: var(#{$borderColor});
  }
}

@mixin floatingUIAnimActive {
  opacity: 1;
  transform: translate(0);
}

@mixin floatingUIElemAnim(
  $selector,
  $boxShadow: "--calcite-shadow-md",
  $borderRadius: "--calcite-corner-radius-0",
  $borderWidth: "--calcite-border-width-none",
  $borderColor: "--calcite-color-border-3",
  $backgroundColor: "--calcite-color-foreground-1"
) {
  #{$selector} {
    @include floatingUIAnim($boxShadow, $borderRadius, $borderWidth, $borderColor, $backgroundColor);

    &[data-placement^="bottom"] .calcite-floating-ui-anim {
      transform: $floating-ui-transform-bottom;
    }

    &[data-placement^="top"] .calcite-floating-ui-anim {
      transform: $floating-ui-transform-top;
    }

    &[data-placement^="left"] .calcite-floating-ui-anim {
      transform: $floating-ui-transform-left;
    }

    &[data-placement^="right"] .calcite-floating-ui-anim {
      transform: $floating-ui-transform-right;
    }

    &[data-placement] .calcite-floating-ui-anim--active {
      @include floatingUIAnimActive();
    }
  }
}

@mixin floatingUIHostAnim($boxShadow, $borderRadius, $borderWidth, $borderColor, $backgroundColor) {
  @include floatingUIAnim($boxShadow, $borderRadius, $borderWidth, $borderColor, $backgroundColor);

  :host([data-placement^="bottom"]) .calcite-floating-ui-anim {
    transform: $floating-ui-transform-bottom;
  }

  :host([data-placement^="top"]) .calcite-floating-ui-anim {
    transform: $floating-ui-transform-top;
  }

  :host([data-placement^="left"]) .calcite-floating-ui-anim {
    transform: $floating-ui-transform-left;
  }

  :host([data-placement^="right"]) .calcite-floating-ui-anim {
    transform: $floating-ui-transform-right;
  }

  :host([data-placement]) .calcite-floating-ui-anim--active {
    @include floatingUIAnimActive();
  }
}

@mixin floatingUIContainer($zIndex: "--calcite-z-index-dropdown") {
  display: block;
  position: absolute;
  z-index: var(#{$zIndex});
}

@mixin floatingUIWrapper {
  visibility: hidden;
}

@mixin floatingUIWrapperActive {
  visibility: visible;
}

@mixin floatingUIHost(
  $zIndex: "--calcite-z-index-dropdown",
  $boxShadow: "--calcite-shadow-md",
  $borderRadius: "--calcite-corner-radius-0",
  $borderWidth: "--calcite-border-width-none",
  $borderColor: "--calcite-color-border-3",
  $backgroundColor: "--calcite-color-foreground-1"
) {
  :host {
    @include floatingUIContainer($zIndex);
  }

  @include floatingUIHostAnim($boxShadow, $borderRadius, $borderWidth, $borderColor, $backgroundColor);

  @include calciteHydratedHidden();

  @include floatingUIArrow($backgroundColor, $borderColor);
}

@mixin floatingUIArrow($backgroundColor: "--calcite-color-foreground-1", $borderColor: "--calcite-color-border-3") {
  .calcite-floating-ui-arrow {
    z-index: var(--calcite-z-index-default);
    position: absolute;
    pointer-events: none;
    fill: var(#{$backgroundColor});
  }

  .calcite-floating-ui-arrow__stroke {
    stroke: var(#{$borderColor});
  }
}
